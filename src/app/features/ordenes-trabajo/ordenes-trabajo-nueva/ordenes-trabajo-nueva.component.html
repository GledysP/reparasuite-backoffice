<div class="rs-page-wrapper">
  <h2 class="rs-main-title">New Work Order</h2>

  <form [formGroup]="form" class="rs-form-container">
    
    <mat-card class="rs-section-card">
      <mat-card-header>
        <mat-card-title class="rs-card-title">CUSTOMER INFORMATION</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="rs-flex-row">
          <button mat-stroked-button type="button" (click)="buscarCliente()" class="btn-find-client">
            <mat-icon>search</mat-icon> Find existing customer
          </button>
          <mat-form-field appearance="outline" class="flex-grow-2">
            <mat-label>Customer Name*</mat-label>
            <input matInput formControlName="clienteNombre">
          </mat-form-field>
          <mat-form-field appearance="outline" class="flex-grow-1">
            <mat-label>Phone</mat-label>
            <input matInput formControlName="clienteTelefono">
          </mat-form-field>
          <mat-form-field appearance="outline" class="flex-grow-1">
            <mat-label>Email (Optional)</mat-label>
            <input matInput formControlName="clienteEmail">
          </mat-form-field>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="rs-section-card">
      <mat-card-header>
        <mat-card-title class="rs-card-title">SERVICE DETAILS</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="rs-radio-row">
          <span class="rs-label-text">Service Type</span>
          <mat-radio-group formControlName="tipo" class="rs-radio-group">
            <mat-radio-button value="TIENDA">In-store</mat-radio-button>
            <mat-radio-button value="DOMICILIO">On-site</mat-radio-button>
          </mat-radio-group>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="rs-section-card">
      <mat-card-header>
        <mat-card-title class="rs-card-title">JOB DETAILS</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Issue Description*</mat-label>
          <textarea matInput rows="3" formControlName="descripcion"></textarea>
        </mat-form-field>
        
        <div class="rs-flex-row mt-10">
          <mat-form-field appearance="outline" class="flex-grow-1">
            <mat-label>Priority*</mat-label>
            <mat-select formControlName="prioridad">
              <mat-option *ngFor="let p of prioridades" [value]="p">{{p}}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline" class="flex-grow-2">
            <mat-label>Assign Technician</mat-label>
            <mat-select formControlName="tecnicoId">
              <mat-option *ngFor="let t of tecnicos" [value]="t.id">{{t.nombre}}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline" class="flex-grow-1">
            <mat-label>Scheduled Date</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="fechaPrevista">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="rs-section-card">
      <mat-card-header>
        <mat-card-title class="rs-card-title">PHOTOS / ATTACHMENTS</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="rs-dropzone">
          <mat-icon class="rs-dropzone-icon">cloud_upload</mat-icon>
          <p class="rs-dropzone-text">Click to upload</p>
        </div>
      </mat-card-content>
    </mat-card>

    <div class="rs-footer">
      <button mat-button type="button" (click)="cancelar()" class="btn-cancelar">Cancel</button>
      <button mat-raised-button class="btn-guardar" type="button" (click)="crear()">
        Create Work Order
      </button>
    </div>
  </form>
</div>